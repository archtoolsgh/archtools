{% extends 'main.html' %}
{% load static %}
    {% block content %}
    <link rel="stylesheet" href={% static 'assets/css/checkout.css' %}>
    <br><br>
    <div class="section-heading">
        <h2>Checkout</h2>
        {% comment %} <span>Order materials and apparatuses for medicine, pharmacy and nursing students</span> {% endcomment %}
    </div>
    <div style="" class="checkout-body">
        <div class="cart-div">
            <div class="cart-link">
                <a href="{% url 'cart' %}"><i class="fas fa-arrow-left"></i>Back to Cart</a>
            </div>
            <div class="order-info">
                <p>Order Summary</p>
            </div>
            {% for item in items %}
            <div class="product-div">
                <div>
                    <img src="{{item.product.imageURL}}" alt="">
                </div>
                <div>
                    <p>{{item.product.name}} </p>
                </div>
                <div>
                    <p>GHS {{item.product.price}} </p>
                </div>
                <div>
                    <p>{{item.quantity}} </p>
                </div>
            </div>
            {% endfor %}
            <div class="item-div">
                <p>Items: {{order.get_cart_items}} </p>
                <p>Total: GHS {{order.get_cart_total}} </p>
            </div>
        </div>
        <div class="contain">
            <h1>Receipt</h1>
            <form id="receiptForm" action="https://formspree.io/f/mgvvqbzn" method="POST">
                <label for="receiptNo">Receipt No.:</label>
                <input name="Receipt No.:" type="text" id="receiptNo" required value="{{randomNum}}" readonly>
    
                <label for="date">Telephone:</label>
                <input name="Telephone:" type="text" id="date" required value = "+233">
    
                <label for="amount">Amount:</label>
                <input name="Amount" type="text" id="amount" required value="GHS {{order.get_cart_total}}" readonly>
    
                <label for="from">From:</label>
                <input name="Name" type="text" id="from" required>
    
                <label for="paymentFor">Payment For:</label>
                {% for item in items %}
                <input name="Item" type="text" id="paymentFor" required value ="{{item.product.name}} - {{item.quantity}}  ({{item.product.price}} each)" readonly>
                {% endfor %}
    
                {% comment %} <label for="receivedBy">Received By:</label>
                <input type="text" id="receivedBy" required> {% endcomment %}
    
                <button type="submit" id="">Place Order</button>
                <button type="button" id="generateBtn">Generate Receipt</button>
            </form>
    
            <div class="receipt" id="receiptPreview" style="display: none;">
                <h2>Receipt</h2>
                <div class="no-date">
                    <p><strong>Receipt No.:</strong> <span id="displayReceiptNo"></span></p>
                    <p><strong>Date:</strong> <span id="displayDate"></span></p>
                </div>
                <div class="from-amount">
                    <p><strong>From:</strong> <span id="displayFrom"></span></p>
                    <p><strong>Amount:</strong> $<span id="displayAmount"></span></p>
                </div>
                <p><strong>Payment For:</strong> <span id="displayPaymentFor"></span></p>
                <p class="by"><strong>Received By:</strong> <span id="displayReceivedBy"></span></p>
            </div>
    
            <div id="button-grp" style="display: none;">
                <button id="editBtn">Edit Receipt</button>
                <button id="printBtn">Print Receipt</button>
            </div>
        </div>
    </div>
    {% endblock %}